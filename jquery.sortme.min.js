!function ($) { var downArrow = '\u25bc', upArrow = '\u25b2', settings = {}, color = function (r, o, t, n) { for (t = 3; t--; r[t] = 0 > n ? 0 : n > 255 ? 255 : 0 | n) n = r[t] + o; return r }, changeBackgroundColor = function ($el, amount) { var c = $el.css("background-color"); c = eval("[" + c.substr(4, c.length - 5) + "]"); var newColor = color(c, amount); $el.css("background-color", "rgb(" + newColor.toString() + ")") }, isNumberType = function (r) { var o = !0; return r.forEach(function (r) { isNaN(parseFloat(r)) && (o = !1) }), o }, sort = function (r) { var o, t = $(r.currentTarget), n = t.closest("table"), a = n.find("thead tr th.sort-me-col"), e = !0; if (a.length) { n.find("tbody tr td.sort-me-val").toArray().forEach(function (r) { var o = $(r); o.removeClass("sort-me-val"), changeBackgroundColor(o, 10) }), o = parseFloat(a.css("width").replace("px", "")), a.css("width", o - 14); var s = a.find(".sort-me-arrow"), c = s.data("jsSortdesc"); if (s.remove(), changeBackgroundColor(a, 10), a.get(0) == t.get(0) && c) e = !1; else if (a.removeClass("sort-me-col"), !c) return } var l = t.index(), i = n.find("tbody tr").toArray(), d = !1, u = i.map(function (r) { var o = $(r).find("td")[l]; return o ? o.innerText : (d = !0, null) }); if (d) return void console.log("jquery.sortme unable to sort table probably due to a td with a colspan"); t.addClass("sort-me-col"), o = parseFloat(t.css("width").replace("px", "")), t.css("width", o + 14), t.html(t.html() + '<span class="sort-me-arrow" style="float:right" data-js-sortdesc="' + e + '">' + (e ? downArrow : upArrow) + "</span>"), changeBackgroundColor(t, -10), isNumberType(u) && (u = u.map(function (r) { return parseFloat(r) })); var f = 0, h = []; u.forEach(function (r) { h.push({ ind: f, val: r }), f++ }), h.sort(function (r, o) { return r.val > o.val ? e ? -1 : 1 : r.val < o.val ? e ? 1 : -1 : 0 }), n.find("tbody tr").remove(); var v = n.find("tbody"); h.forEach(function (r) { v.append(i[r.ind]) }), v.find("tr td:nth-child(" + (l + 1) + ")").toArray().forEach(function (r) { var o = $(r); o.addClass("sort-me-val"), changeBackgroundColor(o, -10) }) }, init = function (r, o) { $(o).find("th").on("click", function (r) { sort(r) }) }; $.fn.sortme = function (r) { return $.extend(settings, r), this.each(init), this } }(jQuery);